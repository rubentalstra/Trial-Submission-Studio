# Example CDISC Transpiler Configuration File
#
# This file demonstrates how to configure the CDISC Transpiler.
# Copy this file to 'cdisc_transpiler.toml' in your working directory
# and customize the values as needed.
#
# Configuration precedence (highest to lowest):
# 1. This TOML file (if exists)
# 2. Environment variables
# 3. Default values (see cdisc_transpiler/config.py)

[paths]
# Directory containing SDTM specification JSON files
# Default: "docs/SDTMIG_v3.4"
sdtm_spec_dir = "docs/SDTMIG_v3.4"

# Directory containing CDISC Controlled Terminology files
# Default: "docs/Controlled_Terminology"
ct_dir = "docs/Controlled_Terminology"

[default]
# Minimum confidence threshold for fuzzy column matching (0.0-1.0)
# Higher values require more confident matches
# Default: 0.5
min_confidence = 0.5

# Chunk size for streaming processing (number of rows)
# Default: 1000
chunk_size = 1000

# Default date for domain synthesis (ISO 8601 format)
# Used when generating missing trial design domains
# Default: "2023-01-01"
default_date = "2023-01-01"

# Default subject identifier for domain synthesis
# Used when generating empty observation domains
# Default: "SYNTH001"
default_subject = "SYNTH001"

# Default investigational site country for DM.COUNTRY.
# Use this only when your source data does not provide a site country.
# SDTMIG guidance generally uses ISO 3166-1 Alpha-3 (regulatory requirements may vary).
# Default: unset
# default_country = "NLD"

# Output format: "xpt", "xml", or "both"
# Default: "both"
output_format = "both"

# Whether to generate Define-XML metadata
# Default: true
generate_define = true

# Whether to generate SAS transformation programs
# Default: true
generate_sas = true

# Optional trial design scaffolds (study-level metadata)
#
# These can be used to generate TS/TA/TE when your source folder does not
# contain these datasets as CSVs and you still need them present for
# submission package validators.
#
# Important: SE is subject-level and should come from actual subject data.
# This config intentionally does not support generating SE.

[[trial_design.ts]]
# Trial Summary (TS)
#
# Populate TS via the TOML config when your source folder does not provide TS.
# The transpiler will ensure all commonly validator-expected TS parameters are
# present when --generate-trial-design is enabled.
#
# IMPORTANT: Values (TSVAL) are study metadata and should come from your
# protocol / registry / study documentation. The transpiler will only fill a
# small subset of TSVALs deterministically (e.g., ACTSUB, SSTDTC/SENDTC when DM
# contains RFSTDTC/RFENDTC, FCNTRY from default_country).
TSPARMCD = "TITLE"
TSPARM = "Trial Title"
TSVAL = "<required: trial title>"

[[trial_design.ts]]
TSPARMCD = "TPHASE"
TSPARM = "Trial Phase Classification"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "TTYPE"
TSPARM = "Trial Type"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "STYPE"
TSPARM = "Study Type"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "INTTYPE"
TSPARM = "Intervention Type"
TSVAL = "<required when STYPE is INTERVENTIONAL>"

[[trial_design.ts]]
TSPARMCD = "INTMODEL"
TSPARM = "Intervention Model"
TSVAL = "<required when STYPE is INTERVENTIONAL>"

[[trial_design.ts]]
TSPARMCD = "TINDTP"
TSPARM = "Trial Indication Type"
TSVAL = "<required when STYPE is INTERVENTIONAL>"

[[trial_design.ts]]
TSPARMCD = "TRT"
TSPARM = "Investigational Therapy or Treatment"
TSVAL = "<required when STYPE is INTERVENTIONAL>"

[[trial_design.ts]]
TSPARMCD = "PCLAS"
TSPARM = "Pharmacological Class of Investigational Therapy"
TSVAL = "<required for some intervention types>"

[[trial_design.ts]]
TSPARMCD = "ADDON"
TSPARM = "Added on to Existing Treatments"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "CURTRT"
TSPARM = "Current Therapy or Treatment"
TSVAL = "<required when ADDON is Y>"

[[trial_design.ts]]
TSPARMCD = "OBJPRIM"
TSPARM = "Trial Primary Objective"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "OUTMSPRI"
TSPARM = "Primary Outcome Measure"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "SPONSOR"
TSPARM = "Clinical Study Sponsor"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "REGID"
TSPARM = "Registry Identifier"
TSVAL = "<optional/expected depending on submission>"

[[trial_design.ts]]
TSPARMCD = "FCNTRY"
TSPARM = "Planned Country of Investigational Sites"
TSVAL = "<required; can be derived from default_country>"

[[trial_design.ts]]
TSPARMCD = "SSTDTC"
TSPARM = "Study Start Date"
TSVAL = "<required; can be derived from DM.RFSTDTC when present>"

[[trial_design.ts]]
TSPARMCD = "SENDTC"
TSPARM = "Study End Date"
TSVAL = "<required; can be derived from DM.RFENDTC when present>"

[[trial_design.ts]]
TSPARMCD = "ACTSUB"
TSPARM = "Actual Number of Subjects"
TSVAL = "<required; can be derived from count(DM.USUBJID)>"

[[trial_design.ts]]
TSPARMCD = "PLANSUB"
TSPARM = "Planned Number of Subjects"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "NARMS"
TSPARM = "Planned Number of Arms"
TSVAL = "<required; can be derived from distinct TA.ARMCD if configured>"

[[trial_design.ts]]
TSPARMCD = "RANDOM"
TSPARM = "Trial is Randomized"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "TBLIND"
TSPARM = "Trial Blinding Schema"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "TCNTRL"
TSPARM = "Control Type"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "SEXPOP"
TSPARM = "Sex of Participants"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "AGEMIN"
TSPARM = "Planned Minimum Age of Subject"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "AGEMAX"
TSPARM = "Planned Maximum Age of Subjects"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "HLTSUBJI"
TSPARM = "Healthy Subject Indicator"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "TDIGRP"
TSPARM = "Diagnosis Group"
TSVAL = "<required when HLTSUBJI is N>"

[[trial_design.ts]]
TSPARMCD = "STOPRULE"
TSPARM = "Study Stop Rules"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "ADAPT"
TSPARM = "Adaptive Design"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "LENGTH"
TSPARM = "Trial Length"
TSVAL = "<required>"

[[trial_design.ts]]
TSPARMCD = "DCUTDTC"
TSPARM = "Data Cutoff Date"
TSVAL = "<required; ISO 8601 date>"

[[trial_design.ts]]
TSPARMCD = "DCUTDESC"
TSPARM = "Data Cutoff Description"
TSVAL = "<required>"

# FDA Desired / submission metadata (optional depending on requirements)
[[trial_design.ts]]
TSPARMCD = "SDTIGVER"
TSPARM = "SDTM IG Version"
TSVAL = "<can be derived from CLI --sdtm-version>"

[[trial_design.ts]]
TSPARMCD = "SDTMVER"
TSPARM = "SDTM Version"
TSVAL = "<optional>"

[[trial_design.ts]]
TSPARMCD = "THERAREA"
TSPARM = "Therapeutic Area"
TSVAL = "<optional>"

[[trial_design.ts]]
TSPARMCD = "ONGOSIND"
TSPARM = "Ongoing Study Indicator"
TSVAL = "<optional>"

[[trial_design.ts]]
TSPARMCD = "EXTTIND"
TSPARM = "Extension Trial Indicator"
TSVAL = "<optional>"

[[trial_design.ts]]
TSPARMCD = "NCOHORT"
TSPARM = "Number of Groups/Cohorts"
TSVAL = "<optional>"

[[trial_design.ts]]
TSPARMCD = "OBJSEC"
TSPARM = "Trial Secondary Objective"
TSVAL = "<optional>"

[[trial_design.ts]]
TSPARMCD = "PDSTIND"
TSPARM = "Pediatric Study Indicator"
TSVAL = "<optional>"

[[trial_design.ts]]
TSPARMCD = "PDPSTIND"
TSPARM = "Pediatric Postmarket Study Indicator"
TSVAL = "<optional>"

[[trial_design.ts]]
TSPARMCD = "PIPIND"
TSPARM = "Pediatric Investigation Plan Indicator"
TSVAL = "<optional>"

[[trial_design.ts]]
TSPARMCD = "RDIND"
TSPARM = "Rare Disease Indicator"
TSVAL = "<optional>"

[[trial_design.ta]]
ARMCD = "ARM1"
ARM = "Treatment Arm"
ETCD = "SCRN"
ELEMENT = "SCREENING"
TAETORD = 0

[[trial_design.te]]
ETCD = "SCRN"
ELEMENT = "SCREENING"
TESTRL = "<replace with your rule>"
TEENRL = "<replace with your rule>"
TEDUR = "P1D"
